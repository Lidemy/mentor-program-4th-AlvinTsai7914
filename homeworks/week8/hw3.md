## 什麼是 Ajax？

Asynchronous JavaScript and XML ，非同步的運行 JS 和傳輸資料。網頁透過 JS 送出 request 去和伺服器索取和接收資料，再透過 JS 動態改變當前網頁，AJAX 的使用包含 JS、XML、JSON 等多種不同的相關技術的綜合運用。



## 用 Ajax 與我們用表單送出資料的差別在哪？

傳統的表單送出資料，伺服器接收到 request 後會直接回傳一個新的網頁，而使用者當前的網頁就會**全部**更新成的伺服器回傳的網頁，但由於每個和伺服器的互動都會牽扯到整個網頁資料，網頁資料量大的話就得浪費許多頻寬和時間，且在資料完整傳回之前，JS 會停留在傳輸資料和處理資料這幾段句子，等資料傳回後才運行其他的句子，等於整個網頁中牽扯到 JS 的部分都會因傳輸資料而無法動作。

Ajax 則只和伺服器索取特定的資料，透過 JS 將伺服器回傳的資料直接更新在當前網頁上，能夠將資料來回的數據變小，效率也比較快。且 JS 會等傳輸的資料傳回後，**再回頭**運行處理資料的句子，等於當資料完整傳回之前，JS 可以處理別的項目而無需等待。



## JSONP 是什麼？

由於同源政策的安全保護，一般的方式無法從 A 網站調用 B 網站的資源，但由於同源政策中 `<script>` 標籤內的 `src=''`可以引用外部資料來源，所以透過特殊的寫法，從 A 網站去和 B 網站要資料，並且在傳回時將資料打包成 function 並將這 function 輸出的結果為一個 `<script>`標籤包住的資料，這樣瀏覽器就會把此傳輸當成是 `src=''` 在調用外部資源，繞過同源政策的檢查。



## 要如何存取跨網域的 API？

1. 由於同源政策，跨網域的存取會被擋住，並非你的 request 沒傳出或 sever 沒回傳資料，而是 server 回傳的資料被瀏覽器擋住無法傳入本機的 JS 中，這時就要用到 **CORS 跨來源資源共享** 規範， server 端回傳資料時在 header 加上 Access-Control-Allow-Origin，代表 server 允許此資料傳出，所以當要存取跨網域 API 時得先確認 sever 有提供 CORS 。

2. 再來就是閱讀 server 提供的API文件，輸入 request header 中要帶的 URL 以及後面可用的參數。

3. 使用 AJAX 接下 sever 回傳的資料，JSON.parse轉換資料成網頁能使用的語言，並提取需要的參數顯示在網頁上。

   


## 為什麼我們在第四週時沒碰到跨網域的問題，這週卻碰到了？

第四周時使用的是 node.js 對 sever **直接**發出 request 和接收 reponse，中間不透過任何工具傳輸，所以不會有同源政策的問題。

這周使用瀏覽器的運行 JS 對 sever 傳輸，所以資料的傳輸和接收都得**透過瀏覽器**，而這時就得經過**瀏覽器的同源政策**篩選資料是否符合規定，這時就得使用上這周所學到的垮網域存取的技術。